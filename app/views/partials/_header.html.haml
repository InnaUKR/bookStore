%header.navbar.navbar-default
  .container
    .navbar-header
      %button.navbar-toggle.pull-left{type: "button", 'data-toggle': "collapse", 'data-target': "#navbar"}
        %span.sr-only
        %span.icon-bar
        %span.icon-bar
        %span.icon-bar
      %a.navbar-brand
        = t('header.bookstore')
      =link_to cart_path(current_cart.id), class:'shop-link pull-right visible-xs' do
        %span.shop-icon
          %span.shop-quantity= books_in_curt
    =link_to cart_path(current_cart.id), class:'shop-link pull-right hidden-xs' do
      %span.shop-icon
        %span.shop-quantity= books_in_curt
    #navbar.navbar-collapse.collapse.pl-30{'aria-expanded': "false"}
      .visible-xs
        %button.close{type: "button", 'aria-label': "Close"}
          %span{'aria-hidden': "true"} &times;
        %ul.nav.navbar-nav
          %li
            %a{href: "#"}
              = t('header.home')
          %li
            %a{type: "button", 'data-toggle': "collapse", href: "#menu", 'aria-expanded': "false", 'aria-controls': "menu"} Shop
            %ul#menu.collapse.list-unstyled.pl-30.mb-10{'aria-expanded': "false"}
              - categories.each do |category|
                %li
                  = link_to(category.name, categories_path(category: category), class: 'collapse-link')
              - if current_user
                %li
                  %a{type: "button", 'data-toggle': "collapse", href: "#account", 'aria-expanded': "false", 'aria-controls': "account"}= t('navigation.account')
                  %ul#account.collapse.list-unstyled.pl-30.mb-10{'aria-expanded': "false"}
                    %li= link_to(t('navigation.orders'), orders_path, class: 'collapse-link')
                    %li= link_to(t('navigation.settings'), edit_user_registration_path, class: 'collapse-link')
                %li.divider{role: "separator"}
                %li= link_to(t('navigation.log_out'), destroy_user_session_path, method: :delete)
              - else
                %li= link_to(t('navigation.log_in'), new_user_session_path, class: 'collapse-link')
                %li= link_to(t('navigation.sign_up'), new_user_registration_path, class: 'collapse-link')


          %li
            %a{href: "#"} My account
      .hidden-xs
        %ul.nav.navbar-nav
          %li
            %a{href: "#"}
              = t('header.home')
          %li.dropdown
            %a.dropdown-toggle{href: "#", 'data-toggle': "dropdown", role: "button", 'aria-haspopup': "true", 'aria-expanded': "false"} Shop
            %ul.dropdown-menu
              - categories.each do |category|
                %li
                  = link_to(category.name, categories_path(category: category))
            - if current_user.guest
              %li= link_to(t('navigation.log_in'), new_user_session_path)
              %li= link_to(t('navigation.sign_up'), new_user_registration_path)
            - else
              %li.dropdown
                %a.dropdown-toggle{href: "#", 'data-toggle': "dropdown", role: "button", 'aria-haspopup': "true", 'aria-expanded': "false"}= t('navigation.account')
                %ul.dropdown-menu
                  %li= link_to(t('navigation.orders'), orders_path)
                  %li= link_to(t('navigation.settings'), edit_user_registration_path)
                  %li.divider{role: "separator"}
                  %li= link_to(t('navigation.log_out'), destroy_user_session_path, method: :delete)
          %li
            = link_to 'My account', 'cart_path'
      = current_user.cart.line_items.sum{ |line_item| line_item.quantity}.inspect
      = current_user.inspect